#define DX_SPLASH_HANDLES
(
   (dx_splash_screen_enter
      {if_else {&& {! $dx_black_menu} $dx_splash_screen}
         {ui goto_screen splash_screen} ; dx - goes to the splash screen if enabled
         {ui goto_screen meta_loading_main_screen} ; dx - skips the intro movie instantly if disabled
      }
      {saveload_mgr activate} ; dx - load save file early
      #ifdef HX_PS3
      {content_mgr start_refresh} ; dx - start content enumeration early, this causes cache issues on 360 so ps3 only
      #endif
   )
)
#define DX_YELLOW_SPLASH_TEXT
(
      {do
         ($num 178) ;increment this number based on the number of dx_splash entries in locale
         {dx_splashtext.btn set text_token {sprint "dx_splash_" {random_int 1 $num}}} ; dx - set a random splash text
      }
      {dx_splashtext.btn set_local_pos 197.5 0 140}
      {dx_splashtext.btn set_local_rot 35 12.5 -25}
      {new PropAnim splash_text.anim}
      {splash_text.anim add_keys dx_splashtext.btn (position) kPropVector3}

      {splash_text.anim set_key_val dx_splashtext.btn (position) 0 (197.5 0 140)}
      {splash_text.anim set_key_val dx_splashtext.btn (position) 1 (197.5 -50 140)}
      {splash_text.anim set_key_val dx_splashtext.btn (position) 2 (197.5 0 140)}
      {splash_text.anim set_interp_type dx_splashtext.btn (position) kPropHermite}

      {splash_text.anim set rate kTaskUISeconds}
      {splash_text.anim set_frame 0}
      {splash_text.anim animate (loop 0 2) (period 1) (units kTaskUISeconds)}
)

#define DX_NEW_SPLASH_OBJ
(
   {new UIColor custom.color}
   {custom.color set color {pack_color 0.96 0.90 0.28}}

   {new BandButton dx_splashtext.btn}
   {dx_splashtext.btn set resource_name "pentatonic_outline"}
   {dx_splashtext.btn set_showing TRUE}
   {dx_splashtext.btn set_local_scale 1 1 1}
   {dx_splashtext.btn set_local_pos 0 0 -140}
   {dx_splashtext.btn set text_size 30}
   {dx_splashtext.btn set fit_type 2}
   {dx_splashtext.btn set alignment kMiddleCenter}
   {dx_splashtext.btn set width 400}
   {dx_splashtext.btn set height 30}
   {dx_splashtext.btn set alpha 1}
   {dx_splashtext.btn set color_override custom.color}
   {text.grp add_object dx_splashtext.btn}

)
#define DX_INTERNAL_SPLASH_TEXT ;this handles the beta splash easter egg
(
   {custom.color set color {pack_color 1 0 0}}
   {dx_splashtext.btn set color_override custom.color}
   {dx_splashtext.btn set_token_fmt {sprint "INTERNAL BUILD ONLY.  DO NOT DISTRIBUTE IN ANY FORM."}}
   {set $btn_width {dx_splashtext.btn get width}}
   {dx_splashtext.btn set text_size 22.5}
   {dx_splashtext.btn set width {+ 200 $btn_width}}
   {dx_splashtext.btn set_local_pos 0 0 63} ;figure out how to get the right cords somehow, this is a guess
   {start.btn set_showing TRUE}
)

#define DX_SPLASH_PANEL_HANDLES
(
   (dx_splash_panel_enter 
      DX_NEW_SPLASH_OBJ

      {start.btn set_showing FALSE}

      {set $dx_random_number {random_int 0 500}}
      {if {== $dx_random_number 1}
         {if $dx_debug
            {set $dx_splash_beta_egg TRUE}
         }
      }
      #ifndef _SHIP
      {set $dx_splash_beta_egg FALSE} ;test
      #endif
      {if {== $dx_splash_beta_egg FALSE}
         DX_YELLOW_SPLASH_TEXT
      }
      #ifdef _SHIP
      {if {== $dx_splash_beta_egg TRUE}
         DX_INTERNAL_SPLASH_TEXT
      }
      #endif
      ; set main menu logo based on season
      {if_else $dx_seasonal_logos
         {do
            {get_date_time $year $month $day $hour $minute $second}
            {cond
               ({&& {== $month 2} {>= $day 7} {<= $day 17}} {set $dx_season valentines})
               ({&& {== $month 4} {== $day 1}} {set $dx_season aprilfools})
               ({== $month 6} {set $dx_season pride})
               ({== $month 10} {set $dx_season halloween})
               ({== $month 12} {set $dx_season christmas})
               (else {set $dx_season standard})
            }
         }
         {set $dx_season standard}
      }
      {{{{sv8_panel find sv8_a} find cityscape_ao} find logo.tex} set_bitmap {sprint "dx/custom_textures/_additional_textures/logo-" $dx_season #ifdef RB3E "-rb3e" #endif ".png"}}
      {if {== $dx_splash_beta_egg TRUE}
         {{{{sv8_panel find sv8_a} find cityscape_ao} find logo.mesh} set_showing FALSE}
      }
      {rb3.lbl set_showing TRUE} ; dx - this is an unused label i found, we're using it to print version info
      {if {== $dx_splash_beta_egg TRUE}
         {set $dx_random_number {random_int 0 2}}
         {if {== $dx_random_number 1}
            {rb3.lbl set_token_fmt "Rock Band 3 DX"}
         }
      }

      {if {== $dx_splash_beta_egg FALSE}
         {rb3.lbl set caps_mode kCapsModeNone} ; dx - make label lowercase
         {rb3.lbl set_token_fmt rb3e_mod_string} ; dx - show version info
         {rb3.lbl set_local_scale 0.35 0.35 0.35} {rb3.lbl set_local_pos 225 0 -175} ; dx - set the size and position of the version info
      }
   )
   (dx_splash_panel_exit
      {if {exists animate_splash}
         {delete animate_splash}
      }
   )
)
